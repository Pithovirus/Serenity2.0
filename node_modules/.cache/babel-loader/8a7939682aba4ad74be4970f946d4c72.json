{"ast":null,"code":"class Chatbox {\n  constructor() {\n    this.args = {\n      openButton: document.querySelector('.chatbox__button'),\n      chatBox: document.querySelector('.chatbox__support'),\n      sendButton: document.querySelector('.send__button')\n    };\n    this.state = false;\n    this.messages = [];\n  }\n\n  display() {\n    const {\n      openButton,\n      chatBox,\n      sendButton\n    } = this.args;\n    openButton.addEventListener('click', () => this.toggleState(chatBox));\n    sendButton.addEventListener('click', () => this.onSendButton(chatBox));\n    const node = chatBox.querySelector('input');\n    node.addEventListener(\"keyup\", _ref => {\n      let {\n        key\n      } = _ref;\n\n      if (key === \"Enter\") {\n        this.onSendButton(chatBox);\n      }\n    });\n  }\n\n  toggleState(chatbox) {\n    this.state = !this.state; // show or hides the box\n\n    if (this.state) {\n      chatbox.classList.add('chatbox--active');\n    } else {\n      chatbox.classList.remove('chatbox--active');\n    }\n  }\n\n  onSendButton(chatbox) {\n    var textField = chatbox.querySelector('input');\n    let text1 = textField.value;\n\n    if (text1 === \"\") {\n      return;\n    }\n\n    let msg1 = {\n      name: \"User\",\n      message: text1\n    };\n    this.messages.push(msg1);\n    fetch('http://127.0.0.1:5000/predict', {\n      method: 'POST',\n      body: JSON.stringify({\n        message: text1\n      }),\n      mode: 'cors',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(r => r.json()).then(r => {\n      let msg2 = {\n        name: \"Serenity\",\n        message: r.answer\n      };\n      this.messages.push(msg2);\n      this.updateChatText(chatbox);\n      textField.value = '';\n    }).catch(error => {\n      console.error('Error:', error);\n      this.updateChatText(chatbox);\n      textField.value = '';\n    });\n  }\n\n  updateChatText(chatbox) {\n    var html = '';\n    this.messages.slice().reverse().forEach(function (item, index) {\n      if (item.name === \"Sam\") {\n        html += '<div class=\"messages__item messages__item--visitor\">' + item.message + '</div>';\n      } else {\n        html += '<div class=\"messages__item messages__item--operator\">' + item.message + '</div>';\n      }\n    });\n    const chatmessage = chatbox.querySelector('.chatbox__messages');\n    chatmessage.innerHTML = html;\n  }\n\n}\n\nconst chatbox = new Chatbox();\nchatbox.display();","map":{"version":3,"names":["Chatbox","constructor","args","openButton","document","querySelector","chatBox","sendButton","state","messages","display","addEventListener","toggleState","onSendButton","node","key","chatbox","classList","add","remove","textField","text1","value","msg1","name","message","push","fetch","method","body","JSON","stringify","mode","headers","then","r","json","msg2","answer","updateChatText","catch","error","console","html","slice","reverse","forEach","item","index","chatmessage","innerHTML"],"sources":["C:/Users/LENOVO/Desktop/reactapp-serenity/src/components/inc/Chatbot.js"],"sourcesContent":["class Chatbox {\r\n    constructor() {\r\n        this.args = {\r\n            openButton: document.querySelector('.chatbox__button'),\r\n            chatBox: document.querySelector('.chatbox__support'),\r\n            sendButton: document.querySelector('.send__button')\r\n        }\r\n\r\n        this.state = false;\r\n        this.messages = [];\r\n    }\r\n\r\n    display() {\r\n        const {openButton, chatBox, sendButton} = this.args;\r\n\r\n        openButton.addEventListener('click', () => this.toggleState(chatBox))\r\n\r\n        sendButton.addEventListener('click', () => this.onSendButton(chatBox))\r\n\r\n        const node = chatBox.querySelector('input');\r\n        node.addEventListener(\"keyup\", ({key}) => {\r\n            if (key === \"Enter\") {\r\n                this.onSendButton(chatBox)\r\n            }\r\n        })\r\n    }\r\n\r\n    toggleState(chatbox) {\r\n        this.state = !this.state;\r\n\r\n        // show or hides the box\r\n        if(this.state) {\r\n            chatbox.classList.add('chatbox--active')\r\n        } else {\r\n            chatbox.classList.remove('chatbox--active')\r\n        }\r\n    }\r\n\r\n    onSendButton(chatbox) {\r\n        var textField = chatbox.querySelector('input');\r\n        let text1 = textField.value\r\n        if (text1 === \"\") {\r\n            return;\r\n        }\r\n\r\n        let msg1 = { name: \"User\", message: text1 }\r\n        this.messages.push(msg1);\r\n\r\n        fetch('http://127.0.0.1:5000/predict', {\r\n            method: 'POST',\r\n            body: JSON.stringify({ message: text1 }),\r\n            mode: 'cors',\r\n            headers: {\r\n              'Content-Type': 'application/json'\r\n            },\r\n          })\r\n          .then(r => r.json())\r\n          .then(r => {\r\n            let msg2 = { name: \"Serenity\", message: r.answer };\r\n            this.messages.push(msg2);\r\n            this.updateChatText(chatbox)\r\n            textField.value = ''\r\n\r\n        }).catch((error) => {\r\n            console.error('Error:', error);\r\n            this.updateChatText(chatbox)\r\n            textField.value = ''\r\n          });\r\n    }\r\n\r\n    updateChatText(chatbox) {\r\n        var html = '';\r\n        this.messages.slice().reverse().forEach(function(item, index) {\r\n            if (item.name === \"Sam\")\r\n            {\r\n                html += '<div class=\"messages__item messages__item--visitor\">' + item.message + '</div>'\r\n            }\r\n            else\r\n            {\r\n                html += '<div class=\"messages__item messages__item--operator\">' + item.message + '</div>'\r\n            }\r\n          });\r\n\r\n        const chatmessage = chatbox.querySelector('.chatbox__messages');\r\n        chatmessage.innerHTML = html;\r\n    }\r\n}\r\n\r\n\r\nconst chatbox = new Chatbox();\r\nchatbox.display();\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}